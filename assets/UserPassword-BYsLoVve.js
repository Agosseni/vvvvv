import{_ as h}from"./PageContainer-Cb8iWFFe.js";import{r as n,u as V,c as y,b as o,a as E,o as k,d as l,q as U,E as F,e as S,f as q,h as C,k as N,m as _,aL as P,t as R}from"./index-BJ6qOaKr.js";/* empty css               *//* empty css                     *//* empty css                  *//* empty css                */import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={__name:"UserPassword",setup(B){const u=n(),t=n({old_pwd:"",new_pwd:"",re_pwd:""}),i=n({old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{min:6,max:15,message:"原密码长度在6-15位之间",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:15,message:"新密码长度在6-15位之间",trigger:"blur"},{validator:(p,e,r)=>{e===t.value.old_pwd?r(new Error("新密码不能与原密码一样")):r()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{min:6,max:15,message:"确认密码长度在6-15位之间",trigger:"blur"},{validator:(p,e,r)=>{e!==t.value.new_pwd?r(new Error("确认密码必须和新密码一样")):r()},trigger:"blur"}]}),d=V(),w=E(),f=async()=>{await u.value.validate(),await P(t.value),R.success("密码修改成功"),d.setToken(""),d.setUser({}),w.push("/login")},g=()=>{u.value.resetFields()};return(p,e)=>{const r=C,a=q,m=N,c=S,v=F,x=U,b=h;return k(),y(b,{title:"修改密码"},{default:o(()=>[l(x,null,{default:o(()=>[l(v,{span:12},{default:o(()=>[l(c,{ref_key:"formRef",ref:u,model:t.value,rules:i.value,"label-width":"100px"},{default:o(()=>[l(a,{label:"原密码",prop:"old_pwd",style:{width:"600px"}},{default:o(()=>[l(r,{modelValue:t.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.old_pwd=s),"show-password":"",style:{height:"40px"}},null,8,["modelValue"])]),_:1}),l(a,{label:"新密码",prop:"new_pwd",style:{width:"600px"}},{default:o(()=>[l(r,{modelValue:t.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.new_pwd=s),"show-password":"",style:{height:"40px"}},null,8,["modelValue"])]),_:1}),l(a,{label:"确认密码",prop:"re_pwd",style:{width:"600px"}},{default:o(()=>[l(r,{modelValue:t.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.re_pwd=s),"show-password":"",style:{height:"40px"}},null,8,["modelValue"])]),_:1}),l(a,null,{default:o(()=>[l(m,{type:"primary",onClick:f},{default:o(()=>e[3]||(e[3]=[_("修改密码")])),_:1}),l(m,{onClick:g},{default:o(()=>e[4]||(e[4]=[_("重置")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})}}};export{H as default};
